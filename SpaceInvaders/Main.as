package {	import flash.display.Sprite;	import flash.ui.Mouse;	import flash.display.Stage;	import flash.events.*;	import flash.text.*;	import flash.media.SoundMixer;	import Sons;	import Niveau;	public class Main extends Sprite {		private var _nbVies:int;		private var _score:int=0;		private var _numeroNiveau:int=0;		private var _highscore:int=15000;		private var _ecranAccueil:Sprite;		private var _bouton:Jouer;		private var _pseudo:TextField;		private var _monPseudo:String;		private var _rejouer:Rejouer;		private var _ecranQuitter:Sprite;		private var _arreterJeu:Boolean;		private var _canal:Sons;		public function Main():void {			_nbVies=3;			_score=0;			_arreterJeu=false;			this.lancerAccueil();			this._canal = new Sons(0.3);			this._canal.jouer("sons/theme.mp3");		}		private function lancerAccueil():void {			this._ecranAccueil=new Sprite();			this.addChild(this._ecranAccueil);			var titre:Titre=new Titre();			titre.x=250;			titre.y=100;			this._ecranAccueil.addChild(titre);			var monTextFormat= new TextFormat();			monTextFormat.font="Arial";			monTextFormat.size=25;			var pseudoText:TextField=new TextField();			pseudoText.text="Entrez Votre Pseudo";			pseudoText.textColor=0xFFFFFF;			pseudoText.width=150;			pseudoText.defaultTextFormat=monTextFormat;			pseudoText.x=100;			pseudoText.y=275;			this._ecranAccueil.addChild(pseudoText);			this._pseudo=new TextField();			this._pseudo.background=true;			this._pseudo.type=TextFieldType.INPUT;			this._pseudo.backgroundColor=0xffffff;			this._pseudo.x=100;			this._pseudo.y=300;			this._pseudo.height=25;			this._ecranAccueil.addChild(this._pseudo);			this._bouton=new Jouer();			this._bouton.x=300;			this._bouton.y=300;			this._ecranAccueil.addChild(this._bouton);			this._pseudo.addEventListener(KeyboardEvent.KEY_DOWN, activerBoutonJeu);		}		private function activerBoutonJeu(evt:KeyboardEvent):void {			this._pseudo.removeEventListener(KeyboardEvent.KEY_DOWN, activerBoutonJeu);			this._bouton.addEventListener(MouseEvent.CLICK,jouer);		}		private function jouer(evt:MouseEvent):void {			this._bouton.removeEventListener(MouseEvent.CLICK,lancerJeu);			this._monPseudo=this._pseudo.text;			while (this._ecranAccueil.numChildren>0) {				this._ecranAccueil.removeChildAt(0);			}			this._ecranAccueil=null;			this.removeChildAt(0);			lancerJeu();		}		private function rejouer(evt:MouseEvent):void {			this._score=0,			this._rejouer.removeEventListener(MouseEvent.CLICK,rejouer);			this._monPseudo=this._pseudo.text;			while (this._ecranQuitter.numChildren>0) {				this._ecranQuitter.removeChildAt(0);			}			this._ecranQuitter=null;			this.removeChildAt(0);			lancerJeu();		}		private function lancerJeu():void {			var niv:Niveau;			Mouse.hide();			niv=new Niveau(_nbVies,_score,_numeroNiveau,this);			this.addChild(niv);		}		public function niveauSuivant(niveau:int,score:int,vie:int) {			this._score=score;			while (this.numChildren>0) {				this.removeChildAt(0);			}			if (niveau!=10) {				niveau++;				var niv2:Niveau=new Niveau(vie,score,niveau,this);				this.addChild(niv2);			} else {				this.ecranQuitter(true,score,niveau);			}		}		public function ecranQuitter(gagner:Boolean,score:int,niveau:int) {						while (this.numChildren>0) {				this.removeChildAt(0);			}			//this.removeChilAt(0);			Mouse.show();			this._score=score;			this._bouton.removeEventListener(MouseEvent.CLICK,lancerJeu);			this._monPseudo=this._pseudo.text;			this._ecranQuitter=new Sprite();			this.addChild(this._ecranQuitter);			var gagner1:TextField=new TextField();			gagner1.text="";			if (gagner) {				gagner1.text="Felicitation vous avez gagnez";			} else {				gagner1.text="Desolé vous avez perdu";			}			gagner1.textColor=0xFFFFFF;			gagner1.width=150;						gagner1.x=100;			gagner1.y=150;			this._ecranQuitter.addChild(gagner1);			var titre:Titre=new Titre();			titre.x=250;			titre.y=100;			this._ecranQuitter.addChild(titre);			var monTextFormat= new TextFormat();			monTextFormat.font="Arial";			monTextFormat.size=25;			var pseudoText:TextField=new TextField();			pseudoText.text="Votre Pseudo : "+this._pseudo.text;			pseudoText.textColor=0xFFFFFF;			pseudoText.width=150;			pseudoText.defaultTextFormat=monTextFormat;			pseudoText.x=100;			pseudoText.y=200;			this._ecranQuitter.addChild(pseudoText);			var pseudoText2:TextField=new TextField();			pseudoText2.text = "Votre Niveau : "+(niveau);			pseudoText2.textColor=0xFFFFFF;			pseudoText2.width=150;			pseudoText2.defaultTextFormat=monTextFormat;			pseudoText2.x=100;			pseudoText2.y=250;			this._ecranQuitter.addChild(pseudoText2);			var pseudoText3:TextField=new TextField();			pseudoText3.text="Votre Score : "+this._score;			pseudoText3.textColor=0xFFFFFF;			pseudoText3.width=150;			pseudoText3.defaultTextFormat=monTextFormat;			pseudoText3.x=100;			pseudoText3.y=300;			this._ecranQuitter.addChild(pseudoText3);			this._rejouer=new Rejouer();			this._rejouer.x=300;			this._rejouer.y=250;			this._ecranQuitter.addChild(this._rejouer);			this._rejouer.addEventListener(MouseEvent.CLICK,rejouer);		}		//Getters et Setters		public function setNbVies(nb:int):void {			_nbVies=nb;		}		public function setScore(nb:int):void {			_score=nb;		}		public function setArreterJeu(etat:Boolean):void {			this._arreterJeu=etat;		}	}}